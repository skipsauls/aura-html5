<aura:component template="html5:template">
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:attribute name="label" type="String" default="Add Photo"/>
  <aura:attribute name="type" type="String" default="camera" description="Sets the type to camera or file"/>
  <aura:attribute name="multiple" type="Boolean" default="false"/>
  <aura:attribute name="cameraId" type="String" default="camera"/>
  <div class="container" aura:id="container">
    <ul class="{!v.multiple == true ? 'preview multiple' : 'preview'}" aura:id="preview"/>
    
    <div class="controls">
      <aura:if isTrue="{!v.type == 'file' || v.multiple == true || $Browser.isPhone == true || $Browser.isTablet == true}">
        <label for="{!v.cameraId}" aura:id="camera" class="camera">{!v.label}</label>
        <aura:if isTrue="{!v.multiple}">
          <input multiple="" class="file" aura:id="camera" id="{!v.cameraId}" name="photos[]" type="file" accept="image/*" onchange="{!c.addPhoto}" />
          <aura:set attribute="else">
            <input class="file" aura:id="camera" id="{!v.cameraId}" name="photo" type="file" accept="image/*" onchange="{!c.addPhoto}" />
          </aura:set>
        </aura:if>
        <aura:set attribute="else">
          <div class="shutter" aura:id="shutter">
            <button onclick="{!c.snapPhoto}"/>
          </div>
          <button class="camera" aura:id="camera" id="{!v.cameraId}" onclick="{!c.enableCamera}">{!v.label}</button>
        </aura:set>
      </aura:if>
    </div>
  </div>
</aura:component>